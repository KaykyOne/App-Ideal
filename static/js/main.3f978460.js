(()=>{var e={2341:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ie});r(3342);var o=r(6520),a=r(8764),n=r(4987),s=r(6665),i=r(3929),l=r(6283),d=r(6773),u=r(5675),c=r(530),f=r(5648),m=r(484),g=r(3934);const h=(0,r(8336).createClient)(undefined,undefined);class j{users=[];async searchUsersByCPF(e){const{data:t,error:r}=await h.from("usuarios").select("nome").eq("cpf",e).single();return r?(console.error("Erro ao buscar usu\xe1rio:",r),null):t?t.nome:null}}var x=r(1217),b=r.n(x),y=r(397);function p({navigation:e}){const[t,o]=(0,s.useState)(""),[a,u]=(0,s.useState)(!1),[h,x]=(0,s.useState)(0),[p,C]=(0,s.useState)(!1),[v,S]=(0,s.useState)(!1),[T,k]=(0,s.useState)(""),_=new j;(0,s.useEffect)((()=>{x(0),C(!1)}),[]);const D=(e,t,r)=>{n.default.show({type:e,text1:t,text2:r,position:"top"})};(0,s.useEffect)((()=>{let e;return p&&h>0?e=setInterval((()=>{x((e=>e-1))}),1e3):0===h&&p&&(C(!1),o("")),()=>clearInterval(e)}),[p,h]);return(0,y.jsxs)(i.default,{style:w.container,children:[(0,y.jsx)(m.default,{style:w.image,source:r(4682)}),(0,y.jsx)(d.default,{placeholder:"Digite seu CPF",value:t,onChangeText:e=>{o(e),p?x(60):(x(60),C(!0))},style:w.textInput,keyboardType:"numeric"}),(0,y.jsx)(f.default,{style:w.button,onPress:async()=>{if(!t)return void D("error","Erro","Por favor, insira o CPF.");const r=(e=>{const t=e+void 0;return b().SHA256(t).toString(b().enc.Hex)})(t);u(!0);try{const t=await _.searchUsersByCPF(r);t?(e.navigate("Home",{nome:t,cpf:r}),o(""),setTimeout((()=>{e.navigate("Login")}),5e5)):(k("Nenhum usu\xe1rio encontrado com esse CPF."),S(!v))}catch(a){D("error","Erro","Ocorreu um erro ao tentar fazer login."),console.error(a),o("")}finally{u(!1)}},disabled:a,children:a?(0,y.jsx)(c.default,{size:"small",color:"#fff"}):(0,y.jsx)(l.default,{style:w.buttonText,children:"Entrar"})}),(0,y.jsx)(f.default,{children:(0,y.jsx)(l.default,{style:w.textLink,onPress:()=>{e.navigate("Suport")},children:"N\xe3o consegue Entrar? Clique aqui!!"})}),(0,y.jsx)(g.default,{isVisible:v,children:(0,y.jsxs)(i.default,{style:w.modalContent,children:[(0,y.jsx)(l.default,{style:w.modalText,children:T}),(0,y.jsx)(f.default,{onPress:()=>S(!1),children:(0,y.jsx)(l.default,{style:w.modalButton,children:"Fechar"})})]})}),(0,y.jsx)(n.default,{})]})}const w=u.default.create({container:{flex:1,alignItems:"center",justifyContent:"center",backgroundColor:"#f5f5f5",padding:20},image:{height:100,width:200,margin:20},textInput:{width:"80%",backgroundColor:"#fff",borderRadius:10,padding:15,marginBottom:20,borderWidth:1,borderColor:"#ddd"},button:{width:"80%",backgroundColor:"blue",borderRadius:10,paddingVertical:15,alignItems:"center",justifyContent:"center",elevation:2},buttonText:{color:"#fff",fontSize:18,fontWeight:"bold"},textLink:{marginTop:20,fontSize:14,color:"blue",textDecorationLine:"underline"},modalContent:{backgroundColor:"white",padding:20,borderRadius:10,alignItems:"center"},modalText:{fontSize:18,marginBottom:10,textAlign:"center"},modalButton:{color:"blue",fontSize:16,fontWeight:"bold"}});var C=r(6725),v=r(8179);const S=u.default.create({overlay:{position:"absolute",left:0,top:0,right:0,bottom:0,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.3)",zIndex:1e3}}),T=({visible:e})=>e?(0,y.jsx)(i.default,{style:S.overlay,children:(0,y.jsx)(c.default,{size:"large",color:"#0000ff"})}):null;const k=class{async getCurrentTimeAndDateFromServer(){try{const[e,t]=await Promise.all([h.rpc("get_adjusted_time"),h.rpc("get_current_date")]);if(e.error||t.error)return console.error("Erro ao buscar dados:",e.error||t.error),{currentDate:null,currentTime:null};const r=t.data,o=e.data;if(!r||!o)throw new Error("Data ou hora inv\xe1lidas retornadas pelo servidor");return{currentDate:r,currentTime:o}}catch(e){return console.error("Erro ao buscar a data e hora do servidor:",e),{currentDate:null,currentTime:null}}}};class _{constructor(){this.serverTimeService=new k}async marcarAulasConcluidas(e){try{const{data:t,error:r}=await h.from("usuarios").select("usuario_id").eq("cpf",e).single();if(r||!t)return void console.error("Erro ao buscar aluno:",r?.message);const o=t.usuario_id,{data:a,error:n}=await h.from("aulas").select("aula_id, data").eq("aluno_id",o).eq("situacao","Pendente");if(n||!a)return void console.error("Erro ao buscar aulas pendentes:",n?.message);const{currentDate:s,currentTime:i}=await this.getCurrentTimeAndDateFromServer();if(!s||!i)throw new Error("N\xe3o foi poss\xedvel obter a data atual.");const l=new Date(s.toLocaleString("en-US",{timeZone:"America/Sao_Paulo"}));console.log("Data atual ajustada:",l),console.log("Aulas pendentes:",a),await this.checkAndUpdateLog(o,l,i);const d=a.filter((e=>{const t=new Date(e.data);if(t<l)return!0;if(t.toDateString()===l.toDateString()){const e=t.getHours(),r=t.getMinutes(),o=l.getHours(),a=l.getMinutes();if(e<o||e===o&&r<=a)return!0}return!1}));if(0===d.length)return void console.log("Nenhuma aula precisa ser atualizada.");for(const e of d){const{error:t}=await h.from("aulas").update({situacao:"Conclu\xedda"}).eq("aula_id",e.aula_id);t?console.error("Erro ao marcar aula como conclu\xedda:",t.message):console.log("Aula marcada como conclu\xedda.")}}catch(t){console.error("Erro ao marcar aulas como conclu\xeddas:",t.message)}}async testUser(e){try{await this.marcarAulasConcluidas(e);const{data:t,error:r}=await h.from("usuarios").select("num_aulas").eq("cpf",e).single();if(r||!t)return console.error("Erro ao buscar usu\xe1rio:",r?.message),null;const{num_aulas:o}=t;return console.log(o),!(o>=20)}catch(t){return console.error("Erro inesperado ao contar aulas:",t.message),null}}async checkAndUpdateLog(e,t,r){const{data:o,error:a}=await h.from("logs").select("*").eq("aluno_id",e);if(a)console.error("Erro ao buscar logs:",a);else if(o.length>0){const{error:o}=await h.from("logs").update({data:t,hora:r}).eq("aluno_id",e);if(o)return void console.error("Erro ao atualizar log:",o);console.log("Log atualizado com sucesso!")}else{const{data:o,error:a}=await h.from("logs").insert([{aluno_id:e,data:t,hora:r}]);if(a)return void console.error("Erro ao criar log:",a);console.log("Log criado com sucesso!",o)}}async getCurrentTimeAndDateFromServer(){const{currentDate:e,currentTime:t}=await this.serverTimeService.getCurrentTimeAndDateFromServer();return{currentDate:e,currentTime:t}}}const{width:D}=C.default.get("window"),B=u.default.create({container:{flex:1,alignItems:"center",justifyContent:"center",backgroundColor:"#ffffff",padding:20},welcomeText:{fontWeight:"bold",marginBottom:20,color:"#333"},fullWidthButton:{width:"100%",backgroundColor:"blue",borderRadius:8,alignItems:"center",justifyContent:"center",marginBottom:10,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.2,shadowRadius:4,elevation:5},buttonBack:{width:"40%",backgroundColor:"gray",borderRadius:8,alignItems:"center",justifyContent:"center",marginTop:20,padding:10,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.2,shadowRadius:4,elevation:5},fullWidthButton2:{width:"100%",backgroundColor:"#FFC601",borderRadius:8,alignItems:"center",justifyContent:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.2,shadowRadius:4,elevation:5},buttonText:{color:"#ffffff",fontWeight:"bold",textAlign:"center"},buttonText2:{color:"black",fontWeight:"bold",textAlign:"center"}}),E=({route:e})=>{const{nome:t,cpf:r}=e.params,{height:o,width:a}=C.default.get("window"),d=.2*o,u=Math.max(16,Math.min(.025*o,24)),[c,m]=(0,s.useState)(!1),g=new _,h=(0,v.useNavigation)(),[j,x]=(0,s.useState)(""),b=(e,t,r)=>{n.default.show({type:e,text1:t,text2:r,position:"top"})};(0,s.useEffect)((()=>{(async()=>{m(!0);try{await g.marcarAulasConcluidas(r)}catch(e){b("error","Erro",e)}finally{m(!1)}})()}),[]);const p=async e=>{m(!0);try{const t=await g.testUser(r);console.log(t),t?(await new Promise((e=>setTimeout(e,500))),h.navigate(e,{cpf:r})):(x("Voc\xea est\xe1 bloqueado temporariamente, v\xe1 at\xe9 o atendimento!"),setModalVisible(!isModalVisible))}catch(t){b("error","Erro",t)}finally{m(!1)}};return(0,y.jsxs)(i.default,{style:B.container,children:[(0,y.jsxs)(l.default,{style:[B.welcomeText,{fontSize:1.5*u}],children:["Bem-vindo, ",t,"!"]}),(0,y.jsx)(f.default,{style:[B.fullWidthButton,{height:d}],onPress:()=>p("SelectType"),children:(0,y.jsx)(l.default,{style:[B.buttonText,{fontSize:u}],children:"Marcar Aula"})}),(0,y.jsx)(f.default,{style:[B.fullWidthButton2,{height:d}],onPress:()=>p("ListAulas"),children:(0,y.jsx)(l.default,{style:[B.buttonText2,{fontSize:u}],children:"Aulas"})}),(0,y.jsx)(f.default,{style:B.buttonBack,onPress:()=>h.goBack(),children:(0,y.jsx)(l.default,{style:[B.buttonText,{fontSize:u}],children:"Voltar"})}),(0,y.jsx)(T,{visible:c})]})};var z=r(932);class I{async searchCategoriaPretendida(e){if(!e)return void alert("O CPF \xe9 necess\xe1rio.");const{data:t,error:r}=await h.from("usuarios").select("categoria_pretendida").eq("cpf",e);return r?(alert("Erro ao buscar dados: "+r.message),console.error(r),[]):t}}const A=u.default.create({container:{flex:1,alignItems:"center",justifyContent:"center",backgroundColor:"#f5f5f5",padding:20},circle:{width:15,margin:2,height:15,borderRadius:50,backgroundColor:"blue"},contador:{flexDirection:"row",flexWrap:"wrap",margin:10},textInStart:{fontSize:28,fontWeight:"bold",marginBottom:20,color:"#333",textAlign:"center",marginTop:"10%"},buttonBack:{width:"40%",backgroundColor:"gray",borderRadius:8,alignItems:"center",justifyContent:"center",marginTop:20,padding:10,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.2,shadowRadius:4,elevation:5},button:{backgroundColor:"blue",borderRadius:10,paddingVertical:10,paddingHorizontal:20,marginHorizontal:5},buttonText:{color:"#fff",fontSize:30,fontWeight:"bold"},flatListContainer:{alignItems:"center"},modalContent:{backgroundColor:"white",padding:20,borderRadius:10,alignItems:"center"},modalMessage:{fontSize:18,marginBottom:20},modalButtons:{flexDirection:"row",justifyContent:"space-between",width:"100%"},modalButton:{flex:1,backgroundColor:"blue",padding:15,borderRadius:5,marginHorizontal:5,alignItems:"center"},modalButtonText:{color:"white",fontSize:16}}),P=({route:e})=>{const{cpf:t}=e.params,[r,o]=(0,s.useState)([]),[a,d]=(0,s.useState)(!1),[u,c]=(0,s.useState)(!1),[m,h]=(0,s.useState)(null),j=new I,{height:x}=C.default.get("window"),b=(0,v.useNavigation)();(0,s.useEffect)((()=>{(async()=>{if(t){d(!0);try{const e=await j.searchCategoriaPretendida(t);if(e.length>0){const t=e[0].categoria_pretendida;o(t.split("").map((e=>e.toUpperCase())))}else p("Nenhum Resultado","Nenhuma categoria encontrada.")}catch(e){p("Erro","Ocorreu um erro ao buscar as categorias."),console.error(e)}finally{d(!1)}}else p("Erro","O CPF \xe9 necess\xe1rio.")})()}),[t]);const p=(e,t)=>{n.default.show({type:"error",text1:e,text2:t,position:"top"})};return(0,y.jsxs)(i.default,{style:A.container,children:[(0,y.jsx)(l.default,{style:A.textInStart,children:"Clique no tipo da AULA que deseja marcar!"}),(0,y.jsx)(T,{visible:a}),(0,y.jsx)(z.default,{data:r,renderItem:({item:e})=>(0,y.jsx)(f.default,{style:A.button,onPress:()=>(h(e),void c(!0)),children:(0,y.jsx)(l.default,{style:A.buttonText,children:e})}),keyExtractor:(e,t)=>t.toString(),horizontal:!0,showsHorizontalScrollIndicator:!1,contentContainerStyle:A.flatListContainer}),(0,y.jsx)(f.default,{style:A.buttonBack,onPress:()=>b.goBack(),children:(0,y.jsx)(l.default,{style:A.buttonText,children:"Voltar"})}),(0,y.jsxs)(i.default,{style:A.contador,children:[(0,y.jsx)(i.default,{style:[A.circle,{backgroundColor:"blue"}]}),(0,y.jsx)(i.default,{style:[A.circle,{backgroundColor:"lightgray"}]}),(0,y.jsx)(i.default,{style:[A.circle,{backgroundColor:"lightgray"}]}),(0,y.jsx)(i.default,{style:[A.circle,{backgroundColor:"lightgray"}]})]}),(0,y.jsx)(g.default,{isVisible:u,children:(0,y.jsxs)(i.default,{style:A.modalContent,children:[(0,y.jsxs)(l.default,{style:A.modalMessage,children:["Voc\xea tem certeza que deseja selecionar a categoria ",m,"?"]}),(0,y.jsxs)(i.default,{style:A.modalButtons,children:[(0,y.jsx)(f.default,{style:A.modalButton,onPress:()=>{c(!1),b.navigate("SelectInstructor",{cpf:t,type:m})},children:(0,y.jsx)(l.default,{style:A.modalButtonText,children:"Confirmar"})}),(0,y.jsx)(f.default,{style:A.modalButton,onPress:()=>c(!1),children:(0,y.jsx)(l.default,{style:A.modalButtonText,children:"Cancelar"})})]})]})}),(0,y.jsx)(n.default,{ref:e=>n.default.setRef(e)})]})};class V{async searchInstructoresForCategory(e,t){if(!t)return console.log("O Tipo \xe9 necess\xe1rio."),[];const{data:r,error:o}=await h.from("usuarios").select("usuario_id").eq("cpf",e).single();if(o||!r)return alert("Erro ao buscar dados do usu\xe1rio: "+(o?.message||"Usu\xe1rio n\xe3o encontrado")),console.error(o),[];const{data:a,error:n}=await h.from("usuarios_instrutores").select("instrutor_id").eq("usuario_id",r.usuario_id);if(n||!a.length)return alert("Erro ao buscar dados de instrutores para o usu\xe1rio: "+(n?.message||"Nenhum instrutor encontrado")),console.error(n),[];let s=a.map((e=>e.instrutor_id));const{data:i,error:l}=await h.from("instrutores").select("nome_instrutor").in("instrutor_id",s).or(`tipo_instrutor.ilike.%${t}%,tipo_instrutor.ilike.%${t}`);return l?(alert("Erro ao buscar instrutores: "+l.message),console.error(l),[]):i}}const Y=u.default.create({container:{flex:1,alignItems:"center",justifyContent:"center",backgroundColor:"#f5f5f5",padding:20},textInStart:{fontSize:28,fontWeight:"bold",marginBottom:20,color:"#333",textAlign:"center",marginTop:"10%"},circle:{width:15,margin:2,height:15,borderRadius:50,backgroundColor:"#6200ea"},contador:{flexDirection:"row",flexWrap:"wrap",margin:10},list:{width:"100%",marginTop:40},buttonBack:{width:"40%",backgroundColor:"gray",borderRadius:8,alignItems:"center",justifyContent:"center",marginTop:20,padding:10,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.2,shadowRadius:4,elevation:5},button:{backgroundColor:"blue",borderRadius:10,paddingVertical:10,paddingHorizontal:20,marginVertical:5,width:"100%",alignItems:"center"},buttonText:{color:"#fff",fontSize:30,fontWeight:"bold"},flatListContainer:{flexGrow:1,width:"100%"},modalContent:{backgroundColor:"white",padding:20,borderRadius:10,alignItems:"center"},modalMessage:{fontSize:18,marginBottom:20},modalButtons:{flexDirection:"row",justifyContent:"space-between",width:"100%"},modalButton:{flex:1,backgroundColor:"blue",padding:15,borderRadius:5,marginHorizontal:5,alignItems:"center"},modalButtonText:{color:"white",fontSize:16}}),O=({route:e})=>{const{cpf:t,type:r}=e.params,[o,a]=(0,s.useState)([]),[d,u]=(0,s.useState)(!1),[c,m]=(0,s.useState)(!1),[h,j]=(0,s.useState)(null),x=new V,b=(0,v.useNavigation)();(0,s.useEffect)((()=>{(async()=>{if(r){u(!0);try{const e=await x.searchInstructoresForCategory(t,r);a(e.map((e=>e.nome_instrutor)))}catch(e){p("Erro","Ocorreu um erro ao buscar os instrutores."),console.error(e)}finally{u(!1)}}else p("Erro","O Tipo \xe9 necess\xe1rio.")})()}),[r]);const p=(e,t)=>{n.default.show({type:"error",text1:e,text2:t,position:"top"})};return(0,y.jsxs)(i.default,{style:Y.container,children:[(0,y.jsx)(T,{visible:d}),(0,y.jsx)(l.default,{style:Y.textInStart,children:"Clique no instrutor que deseja marcar a aula!"}),(0,y.jsx)(z.default,{data:o,renderItem:({item:e})=>(0,y.jsx)(f.default,{style:Y.button,onPress:()=>(j(e),void m(!0)),children:(0,y.jsx)(l.default,{style:Y.buttonText,children:e})}),keyExtractor:(e,t)=>t.toString(),showsVerticalScrollIndicator:!0,contentContainerStyle:Y.flatListContainer,style:Y.list}),(0,y.jsx)(f.default,{style:Y.buttonBack,onPress:()=>b.goBack(),children:(0,y.jsx)(l.default,{style:Y.buttonText,children:"Voltar"})}),(0,y.jsxs)(i.default,{style:Y.contador,children:[(0,y.jsx)(i.default,{style:[Y.circle,{backgroundColor:"blue"}]}),(0,y.jsx)(i.default,{style:[Y.circle,{backgroundColor:"blue"}]}),(0,y.jsx)(i.default,{style:[Y.circle,{backgroundColor:"lightgray"}]}),(0,y.jsx)(i.default,{style:[Y.circle,{backgroundColor:"lightgray"}]})]}),(0,y.jsx)(g.default,{isVisible:c,children:(0,y.jsxs)(i.default,{style:Y.modalContent,children:[(0,y.jsxs)(l.default,{style:Y.modalMessage,children:["Voc\xea tem certeza que deseja selecionar ",h,"?"]}),(0,y.jsxs)(i.default,{style:Y.modalButtons,children:[(0,y.jsx)(f.default,{style:Y.modalButton,onPress:()=>{m(!1),b.navigate("SelectHourAndDate",{cpf:t,type:r,nameInstructor:h})},children:(0,y.jsx)(l.default,{style:Y.modalButtonText,children:"Confirmar"})}),(0,y.jsx)(f.default,{style:Y.modalButton,onPress:()=>m(!1),children:(0,y.jsx)(l.default,{style:Y.modalButtonText,children:"Cancelar"})})]})]})}),(0,y.jsx)(n.default,{ref:e=>n.default.setRef(e)})]})};var R=r(9164),F=r.n(R);class M{constructor(){this.serverTimeService=new k}async getAlunoAndInstrutorIds(e,t){try{const[r,o]=await Promise.all([h.from("usuarios").select("usuario_id").eq("cpf",e).single(),h.from("instrutores").select("instrutor_id").eq("nome_instrutor",t).single()]);return r.error?(console.error("Erro ao buscar aluno:",r.error.message),{usuario_id:null,instrutor_id:null}):o.error?(console.error("Erro ao buscar instrutor:",o.error.message),{usuario_id:r.data?.usuario_id,instrutor_id:null}):{usuario_id:r.data?.usuario_id,instrutor_id:o.data?.instrutor_id}}catch(r){return console.error("Erro inesperado ao buscar IDs:",r),{usuario_id:null,instrutor_id:null}}}async insertClass(e,t,r,o,a){try{const{data:n,error:s}=await h.from("aulas").insert([{aluno_id:e,instrutor_id:t,situacao:"Pendente",data:r,hora:a,tipo:o}]);return s?(console.error("Erro ao inserir aula:",s.message),null):(console.log("Dados da aula inseridos com sucesso:"),!0)}catch(n){return console.error("Erro inesperado ao inserir aula:",n.message),null}}async createClass(e,t,r,o,a){try{const n=await this.getAlunoAndInstrutorIds(r,e);return n.usuario_id&&n.instrutor_id?await this.insertClass(n.usuario_id,n.instrutor_id,t,o,a):(console.error("N\xe3o foi poss\xedvel encontrar IDs para a aula."),null)}catch(n){return console.error("Erro inesperado ao criar aula:",n),null}}async getUsuarioByCpf(e){try{const{data:t,error:r}=await h.from("usuarios").select("usuario_id, tipo_usuario, categoria_pretendida, data_cadastro, outra_cidade").eq("cpf",e).single();if(r)throw new Error(`Erro ao buscar usu\xe1rio: ${r.message}`);if(!t)throw new Error("Nenhum usu\xe1rio encontrado com o CPF fornecido.");const{usuario_id:o,tipo_usuario:a,categoria_pretendida:n,data_cadastro:s,outra_cidade:i}=t;return{usuario_id:o,tipo_usuario:a,categoria_pretendida:n,data_cadastro:s,outra_cidade:i}}catch(t){throw console.error("Erro na fun\xe7\xe3o getUsuarioByCpf:",t.message),t}}async getConfig(){try{const{data:e,error:t}=await h.from("configuracoes").select("chave, valor").in("chave",["aulas","maximoNormalDia"]);if(t||!e)throw new Error(`Erro ao buscar configuracoes: ${t.message}`);return e.reduce(((e,t)=>(e[t.chave]=t.valor,e)),{})}catch(e){throw console.error("Erro na fun\xe7\xe3o getConfig:",e.message),e}}async countClass(e,t){try{const{count:r,error:o}=await h.from("aulas").select("*",{count:"exact"}).eq("aluno_id",e).eq("situacao",t);return o?(console.error("Erro ao contar gerais aulas:",o.message),null):r}catch(r){return console.error("Erro inesperado ao contar aulas gerais:",r.message),null}}async countClassHoje(e,t){try{const{count:r,error:o}=await h.from("aulas").select("*",{count:"exact"}).eq("aluno_id",e).eq("data",t);return o?(console.error("Erro ao contar de hoje aulas:",o.message),null):r}catch(r){return console.error("Erro inesperado ao contar aulas hoje:",r.message),null}}async getCurrentTimeAndDateFromServer(){const{currentDate:e,currentTime:t}=await this.serverTimeService.getCurrentTimeAndDateFromServer();return{currentDate:e,currentTime:t}}}const q=u.default.create({container:{flex:1,justifyContent:"center",alignItems:"center",padding:20,backgroundColor:"#F8F8F8"},txtButton:{color:"white"},title:{fontSize:24,fontWeight:"bold",color:"#333",marginBottom:20},circle:{width:15,margin:2,height:15,borderRadius:50,backgroundColor:"blue"},contador:{flexDirection:"row",flexWrap:"wrap",margin:10},detail:{fontSize:18,marginVertical:5,color:"#555"},detailValue:{fontWeight:"bold",color:"#333"},button:{width:"80%",backgroundColor:"blue",borderRadius:8,paddingVertical:15,alignItems:"center",justifyContent:"center",marginVertical:10,elevation:3},buttonBack:{width:"80%",backgroundColor:"gray",borderRadius:8,alignItems:"center",justifyContent:"center",marginTop:20,padding:10,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.2,shadowRadius:4,elevation:5},buttonText:{color:"#fff",fontSize:30,fontWeight:"bold"},buttonFechar:{backgroundColor:"red",borderRadius:10,margin:10,textAlign:"center",padding:10}}),W=({route:e,navigation:t})=>{const{nameInstructor:r,data:o,cpf:a,type:n,hora:d}=e.params,[u]=(0,s.useState)(o),[c]=(0,s.useState)([]);var[m,h]=(0,s.useState)(!1);const[j,x]=(0,s.useState)(""),[b,p]=(0,s.useState)(!1),w=new M,C=c.reduce(((e,t)=>(e[t]={disabled:!0,selectedColor:"red"},e)),{}),v=e=>{x(e),p(!b)};((e,t)=>{const r=F()(`${e}-${t}`,"YYYY-MM").daysInMonth();for(let o=1;o<=r;o++){const r=F()(`${e}-${t}-${o}`,"YYYY-MM-DD");0!==r.day()&&6!==r.day()||(C[r.format("YYYY-MM-DD")]={disabled:!0,selectedColor:"red"})}})(F()().year(),F()().month()+1),C[u]={selected:!0,selectedColor:"blue",selectedTextColor:"white"};return(0,y.jsxs)(i.default,{style:q.container,children:[(0,y.jsx)(g.default,{isVisible:b,children:(0,y.jsxs)(i.default,{style:{backgroundColor:"white",padding:20,borderRadius:10},children:[(0,y.jsx)(l.default,{children:j}),(0,y.jsx)(f.default,{style:q.buttonFechar,onPress:()=>p(!1),children:(0,y.jsx)(l.default,{style:q.txtButton,children:"Fechar"})})]})}),(0,y.jsx)(l.default,{style:q.title,children:"Confirme sua Aula"}),(0,y.jsxs)(l.default,{style:q.detail,children:["Tipo da Aula: ",(0,y.jsx)(l.default,{style:q.detailValue,children:n})]}),(0,y.jsxs)(l.default,{style:q.detail,children:["Instrutor: ",(0,y.jsx)(l.default,{style:q.detailValue,children:r})]}),(0,y.jsxs)(l.default,{style:q.detail,children:["Data Selecionada: ",(0,y.jsx)(l.default,{style:q.detailValue,children:F()(u).format("DD/MM/YYYY")})]}),(0,y.jsxs)(l.default,{style:q.detail,children:["Hora da Aula: ",(0,y.jsx)(l.default,{style:q.detailValue,children:d})]}),(0,y.jsxs)(l.default,{style:q.detail,children:["Seu CPF: ",(0,y.jsx)(l.default,{style:q.detailValue,children:a})]}),(0,y.jsx)(T,{visible:m}),(0,y.jsx)(f.default,{style:q.button,onPress:m?null:async()=>{try{if(h(!0),(e=>c.includes(F()(e).format("YYYY-MM-DD")))(u)||(e=>0===F()(e).day()||6===F()(e).day())(u))return v("Data Indispon\xedvel: A data selecionada \xe9 um feriado, s\xe1bado ou domingo."),void h(!1);const e=await w.getUsuarioByCpf(a),s=await w.countClass(e.usuario_id,"Pendente"),i=await w.countClassHoje(e.usuario_id,u),l=await w.getConfig(),f=l.aulas,m=l.maximoNormalDia;console.log(f),console.log(m);const g=e.outra_cidade;if(s>=f)return void v("N\xfamero m\xe1ximo de 4 aulas atingido. Conclua suas aulas para poder marcar mais!");if(g||"D"===n||"E"===n){if(i>=2)return void v("Voc\xea j\xe1 atingiu o n\xfamero m\xe1ximo de 2 aulas para este dia.")}else if(i>=m)return void v("Voc\xea j\xe1 marcou uma aula para este dia. Marque em outro dia.");await w.createClass(r,u,a,n,d)?t.navigate("End",{nameInstructor:r,data:o,cpf:a,type:n,hora:d}):t.navigate("Error","N\xe3o foi poss\xedvel confirmar a aula")}catch(e){t.navigate("Error",e.message)}finally{h(!1)}},children:(0,y.jsx)(l.default,{style:q.buttonText,children:m?"Processando...":"Finalizar"})}),(0,y.jsx)(f.default,{style:[q.button,q.buttonBack],onPress:()=>t.goBack(),children:(0,y.jsx)(l.default,{style:q.buttonText,children:"Voltar"})}),(0,y.jsxs)(i.default,{style:q.contador,children:[(0,y.jsx)(i.default,{style:[q.circle,{backgroundColor:"blue"}]}),(0,y.jsx)(i.default,{style:[q.circle,{backgroundColor:"blue"}]}),(0,y.jsx)(i.default,{style:[q.circle,{backgroundColor:"blue"}]}),(0,y.jsx)(i.default,{style:[q.circle,{backgroundColor:"blue"}]})]})]})},L=u.default.create({container:{flex:1,justifyContent:"center",alignItems:"center",padding:20,backgroundColor:"#F8F8F8"},title:{fontSize:24,fontWeight:"bold",color:"#333",marginBottom:20},button:{width:"80%",backgroundColor:"green",borderRadius:8,paddingVertical:15,alignItems:"center",justifyContent:"center",marginVertical:10,elevation:3},button2:{width:"80%",backgroundColor:"blue",borderRadius:8,paddingVertical:15,alignItems:"center",justifyContent:"center",marginVertical:10,elevation:3},buttonText:{color:"#fff",fontSize:18,fontWeight:"bold"}}),N=({navigation:e,route:t})=>{const{cpf:r}=t.params;return(0,y.jsxs)(i.default,{style:L.container,children:[(0,y.jsx)(l.default,{style:L.title,children:"Sucesso!"}),(0,y.jsx)(f.default,{style:L.button,onPress:()=>{e.navigate("Login")},children:(0,y.jsx)(l.default,{style:L.buttonText,children:"Inicio"})}),(0,y.jsx)(f.default,{style:L.button2,onPress:()=>{e.navigate("SelectType",{cpf:r})},children:(0,y.jsx)(l.default,{style:L.buttonText,children:"Marcar Outra Aula"})})]})},H=u.default.create({container:{flex:1,justifyContent:"center",alignItems:"center",padding:20,backgroundColor:"#F8F8F8"},title:{fontSize:24,fontWeight:"bold",color:"#333",marginBottom:20},title2:{fontSize:16,fontWeight:"bold",color:"#333",marginBottom:20},button:{width:"80%",backgroundColor:"red",borderRadius:8,paddingVertical:15,alignItems:"center",justifyContent:"center",marginVertical:10,elevation:3},buttonText:{color:"#fff",fontSize:18,fontWeight:"bold"}}),$=({route:e,navigation:t})=>{const{error:r}=e.params;return(0,y.jsxs)(i.default,{style:H.container,children:[(0,y.jsx)(l.default,{style:H.title,children:"Erro!"}),(0,y.jsx)(l.default,{style:H.title2,children:r}),(0,y.jsx)(f.default,{style:H.button,onPress:()=>{t.navigate("Login")},children:(0,y.jsx)(l.default,{style:H.buttonText,children:"Sair"})})]})};class U{aulas=[];constructor(){this.serverTimeService=new k}async searchAulas(e){try{const{data:t,error:r}=await h.from("usuarios").select("usuario_id").eq("cpf",e).single();if(r)throw new Error(r.message);const o=t?.usuario_id;if(!o)throw new Error("ID do aluno n\xe3o encontrado ou situa\xe7\xe3o n\xe3o \xe9 Pendente.");const{data:a,error:n}=await h.from("aulas").select("aula_id, data, hora, tipo").eq("aluno_id",o).eq("situacao","Pendente").order("data",{ascending:!0});return n?null:(this.aulas=a||[],this.aulas)}catch(t){return null}}async alterAula(e,t,r,o){try{const{currentDate:a,currentTime:n}=await this.getCurrentTimeAndDateFromServer(),{data:s,error:i}=await h.from("aulas").select("data, hora").eq("aula_id",t).single();if(i)throw new Error(i.message);const l=new Date(`${s.data}T${s.hora}`);if(new Date(`${a}T${n}`)<l)throw new Error("A aula ainda n\xe3o pode ser conclu\xedda. O hor\xe1rio ainda n\xe3o foi alcan\xe7ado.");const{data:d,error:u}=await h.from("aulas").update({situacao:e}).eq("aula_id",t);if(u)throw new Error(u.message);const{data:c,error:f}=await h.from("usuarios").select("num_aulas").eq("cpf",o).single();if(f)throw new Error(f.message);const m={};if("Conclu\xedda"===r)m.num_aulas=(c.num_aulas||0)+1;else{if("Ausente"!==r)return;m.num_faltas=(c.num_faltas||0)+1}const{data:g,error:j}=await h.from("usuarios").update(m).eq("cpf",o);if(j)throw new Error(j.message);return g}catch(a){throw console.log(a),a}}async deleteAula(e){try{const{data:t,error:r}=await h.from("aulas").delete().eq("aula_id",e);if(r)throw r;return t}catch(t){throw t}}async getCurrentTimeAndDateFromServer(){const{currentDate:e,currentTime:t}=await this.serverTimeService.getCurrentTimeAndDateFromServer();return{currentDate:e,currentTime:t}}}function Z({route:e}){const{cpf:t}=e.params,[r,o]=(0,s.useState)(!1),[a,d]=(0,s.useState)(null),[u,c]=(0,s.useState)([]),[m,h]=(0,s.useState)(null),[j,x]=(0,s.useState)(null),b=new U,p=(0,v.useNavigation)(),[w,C]=(0,s.useState)(!1),[S,k]=(0,s.useState)(null),[_,D]=(0,s.useState)(null),B=(e,t,r)=>{n.default.show({type:e,text1:t,text2:r,position:"top",visibilityTime:5e3})},E=async()=>{o(!0),d(null);try{const{currentTime:e,currentDate:r}=await b.getCurrentTimeAndDateFromServer();h(e),x(r);const o=await b.searchAulas(t);c(o||[]),o||d("Nenhuma aula encontrada.")}catch(a){d(a.message),B("error","Erro",a.message)}finally{o(!1)}};(0,s.useEffect)((()=>{E()}),[t]);const I=(e,t)=>{console.log(`A\xe7\xe3o: ${e}, ID da Aula: ${t.aula_id}`);const{data:r,hora:o}=t,a=F()(`${r} ${o}`,"YYYY-MM-DD HH:mm"),n=F()();"Excluir"===e?a.isAfter(n)&&(r!==j||a.diff(n,"hours")>=3)?(k(t),D("Excluir"),C(!0)):B("error","Erro","Voc\xea s\xf3 pode excluir a aula com pelo menos 3 horas de anteced\xeancia."):"Confirmar"===e&&(a.isBefore(n)?(k(t),D("Confirmar"),C(!0)):B("error","Erro","Voc\xea s\xf3 pode confirmar aulas passadas."))};return(0,y.jsxs)(i.default,{style:G.container,children:[(0,y.jsx)(l.default,{style:G.title,children:"Aulas"}),(0,y.jsx)(T,{visible:r}),a?(0,y.jsx)(i.default,{style:G.errorContainer,children:(0,y.jsxs)(l.default,{style:G.errorText,children:["Erro: ",a]})}):(0,y.jsx)(z.default,{data:u,renderItem:({item:e})=>(0,y.jsxs)(i.default,{style:G.itemContainer,children:[(0,y.jsx)(l.default,{style:G.itemTitle,children:"Data:"}),(0,y.jsx)(l.default,{style:G.itemText,children:F()(e.data).format("DD/MM/YYYY")}),(0,y.jsx)(l.default,{style:G.itemTitle,children:"Tipo:"}),(0,y.jsx)(l.default,{style:G.itemText,children:e.tipo}),(0,y.jsx)(l.default,{style:G.itemTitle,children:"Hora:"}),(0,y.jsx)(l.default,{style:G.itemText,children:e.hora}),(0,y.jsxs)(i.default,{style:G.buttonContainer,children:[(0,y.jsx)(f.default,{style:[G.actionButton,G.deleteButton],onPress:()=>I("Excluir",e),children:(0,y.jsx)(l.default,{style:G.actionButtonText,children:"Excluir"})}),(0,y.jsx)(f.default,{style:[G.actionButton,G.confirmButton],onPress:()=>I("Confirmar",e),children:(0,y.jsx)(l.default,{style:G.actionButtonText,children:"Confirmar"})})]})]}),keyExtractor:e=>e.aula_id.toString(),contentContainerStyle:G.flatListContainer}),(0,y.jsx)(f.default,{style:G.buttonBack,onPress:()=>p.goBack(),children:(0,y.jsx)(l.default,{style:G.buttonText,children:"Voltar"})}),(0,y.jsx)(g.default,{isVisible:w,children:(0,y.jsxs)(i.default,{style:G.modalContent,children:[(0,y.jsx)(l.default,{style:G.modalMessage,children:"Excluir"===_?`Voc\xea tem certeza que deseja excluir a aula ${S?.tipo}?`:`Voc\xea tem certeza que deseja confirmar a aula ${S?.tipo}?`}),(0,y.jsxs)(i.default,{style:G.modalButtons,children:[(0,y.jsx)(f.default,{style:G.modalButton,onPress:async()=>{if(S&&S.aula_id)try{"Excluir"===_?(console.log("Aula exclu\xedda!",S),await b.deleteAula(S.aula_id),B("success","Sucesso","Aula exclu\xedda com sucesso!")):"Confirmar"===_&&(console.log("Aula confirmada!",S),await b.alterAula("Conclu\xedda",S.aula_id,"Conclu\xedda",t),B("success","Sucesso","Aula confirmada com sucesso!")),E(),C(!1),k(null)}catch(a){B("error","Erro",a.message)}else console.error("Erro: Aula ou ID da aula n\xe3o selecionado corretamente.")},children:(0,y.jsx)(l.default,{style:G.modalButtonText,children:"Confirmar"})}),(0,y.jsx)(f.default,{style:G.modalButton,onPress:()=>C(!1),children:(0,y.jsx)(l.default,{style:G.modalButtonText,children:"Cancelar"})})]})]})})]})}const G=u.default.create({container:{flex:1,backgroundColor:"#f5f5f5",padding:20},title:{fontSize:28,fontWeight:"bold",color:"#333",marginTop:50,margin:20,textAlign:"center"},flatListContainer:{flexGrow:1},errorContainer:{alignItems:"center",justifyContent:"center",flex:1},errorText:{color:"red",fontSize:18,fontWeight:"bold"},itemContainer:{backgroundColor:"#D9D9D9",borderRadius:10,padding:20,marginVertical:10,marginHorizontal:20,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3},itemTitle:{fontSize:16,fontWeight:"bold",color:"#333",marginBottom:5},itemText:{fontSize:16,color:"#666",marginBottom:15},buttonContainer:{marginTop:10},actionButton:{borderRadius:8,paddingVertical:12,alignItems:"center",justifyContent:"center"},deleteButton:{backgroundColor:"#FF4C4C",marginBottom:10},confirmButton:{backgroundColor:"#4CAF50"},actionButtonText:{color:"#fff",fontSize:16,fontWeight:"bold"},buttonBack:{marginTop:20,backgroundColor:"#007BFF",borderRadius:8,paddingVertical:12,alignItems:"center",justifyContent:"center"},buttonText:{color:"#fff",fontSize:18,fontWeight:"bold"},modalContent:{backgroundColor:"white",borderRadius:10,padding:20,alignItems:"center",justifyContent:"center"},modalMessage:{fontSize:18,marginBottom:20,textAlign:"center"},modalButtons:{flexDirection:"row",justifyContent:"space-between",width:"100%"},modalButton:{backgroundColor:"#007BFF",borderRadius:8,paddingVertical:10,paddingHorizontal:20,marginHorizontal:5},modalButtonText:{color:"#fff",fontSize:16,fontWeight:"bold"}});var J=r(2772),K=r(3475);class Q{horasDisponiveis=[];constructor(){this.serverTimeService=new k}async fetchWithTimeout(e,t={}){const{timeout:r=1e4}=t,o=new Promise(((e,t)=>setTimeout((()=>t(new Error("Requisi\xe7\xe3o expirou"))),r)));return Promise.race([fetch(e,t),o])}async atualizarValores(e,t){if(!e||!t)throw new Error("Todos os par\xe2metros s\xe3o necess\xe1rios.");const r=new Date(t);if(isNaN(r.getTime()))throw new Error("Data inv\xe1lida.");const{data:o,error:a}=await h.from("instrutores").select("instrutor_id, tipo_instrutor").eq("nome_instrutor",e).single();if(a)throw new Error(a.message);const n=o?.instrutor_id,s=o?.tipo_instrutor||"";console.log(s);const[i,l,d]=await Promise.all([h.from("horariosinstrutores").select("hora_inicio, hora_fim, hora_inicio_almoco, hora_fim_almoco").eq("instrutor_id",n).single(),h.from("aulas").select("hora").eq("instrutor_id",n).eq("data",r.toISOString().split("T")[0]),h.from("exames").select("hora, tipo").eq("data",r.toISOString().split("T")[0])]);if(i.error)throw new Error(i.error.message);if(l.error)throw new Error(l.error.message);if(d.error)throw new Error(d.error.message);const{hora_inicio:u,hora_fim:c,hora_inicio_almoco:f,hora_fim_almoco:m}=i.data,g=(e,t,r)=>{const o=[];let a=new Date(`1970-01-01T${e}Z`);const n=new Date(`1970-01-01T${t}Z`);for(;a<n;)o.push(a.toISOString().substr(11,5)),a=new Date(a.getTime()+r);return o},j=3e6,x=[...g(u,f,j),...g(m,c,j)],b=l.data.map((e=>e.hora.substr(0,5))),y=d.data.filter((e=>s.includes(e.tipo))).map((e=>e.hora.substr(0,5))),p=[...b,...y],w=x.filter((e=>!p.includes(e)));this.horasDisponiveis=((e,t)=>e.filter((e=>!t.some((t=>{const r=((e,t)=>{const r=new Date(`1970-01-01T${e}Z`);return(new Date(`1970-01-01T${t}Z`)-r)/6e4})(e,t);return r>=-50&&r<=50})))))(w,y)}async getCurrentTimeAndDateFromServer(){const{currentDate:e,currentTime:t}=await this.serverTimeService.getCurrentTimeAndDateFromServer();return{currentDate:e,currentTime:t}}}var X=r(9162),ee=r(9190);const te=u.default.create({container:{flex:1,padding:40,justifyContent:"center",alignItems:"center",backgroundColor:"#fff",paddingHorizontal:20},rowContainer:{flexDirection:"row",alignItems:"center"},circle:{width:15,margin:2,height:15,borderRadius:50,backgroundColor:"blue"},contador:{flexDirection:"row",flexWrap:"wrap",margin:10},dateContainer:{flexDirection:"row",alignItems:"center"},dateTime:{fontSize:28,marginVertical:20,color:"#333",margin:20},button:{width:"100%",paddingVertical:15,backgroundColor:"blue",borderRadius:10,alignItems:"center",justifyContent:"center",marginVertical:5,elevation:2},tipText:{color:"green",fontSize:20,textAlign:"center"},buttonBack:{width:"40%",backgroundColor:"gray",borderRadius:8,alignItems:"center",justifyContent:"center",marginTop:20,padding:10,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.2,shadowRadius:4,elevation:5},buttonDisabled:{backgroundColor:"#ccc"},buttonText:{color:"#fff",fontSize:30,fontWeight:"bold"},buttonTextDisabled:{color:"#999"},listContainer:{width:"100%"},flatListContentContainer:{paddingBottom:20},separator:{height:10},errorText:{color:"red",fontSize:16,marginBottom:20},messageText:{fontSize:18,color:"red",textAlign:"center",marginVertical:20},modalContent:{backgroundColor:"white",padding:20,borderRadius:10,alignItems:"center"},modalMessage:{fontSize:18,marginBottom:20},modalButtons:{flexDirection:"row",justifyContent:"space-between",width:"100%"},modalButton:{flex:1,backgroundColor:"blue",padding:15,borderRadius:5,marginHorizontal:5,alignItems:"center"},modalButtonText:{color:"white",fontSize:16}}),re=({route:e,navigation:t})=>{const{cpf:r,type:o,nameInstructor:a}=e.params,[d,u]=(0,s.useState)(!1),[c,m]=(0,s.useState)([]),[h,j]=(0,s.useState)([]),[x,b]=(0,s.useState)(null),[p,w]=(0,s.useState)(null),[C,v]=(0,s.useState)(!1),[S,k]=(0,s.useState)(F()().format("YYYY-MM-DD")),[_,D]=(0,s.useState)(!1),[B,E]=(0,s.useState)(""),[I,A]=(0,s.useState)(null),P=new Q;(0,s.useEffect)((()=>{(async()=>{try{const e=await fetch("https://brasilapi.com.br/api/feriados/v1/2024"),t=await e.json();m(t.map((e=>e.date)))}catch(e){V("Erro ao buscar os feriados.")}})()}),[]),(0,s.useEffect)((()=>{(async()=>{u(!0);try{await P.atualizarValores(a,S,o);const{currentTime:e}=await P.getCurrentTimeAndDateFromServer();j(P.horasDisponiveis),w(e)}catch(e){V(e.message)}finally{u(!1)}})()}),[S]);const V=e=>{b(e),n.default.show({type:"error",text1:"Erro",text2:e,position:"top"})},Y=e=>{const t=F()(S).add(e,"days");t.isBetween(F()(),F()().add(7,"days"))&&k(t.format("YYYY-MM-DD"))},O=e=>{var n,s;e<p&&S===F()().format("YYYY-MM-DD")?V("Hora anterior \xe0 atual."):(n=`Voc\xea tem certeza que deseja marcar para ${e} neste dia?`,s=()=>{t.navigate("ConfirmAula",{cpf:r,type:o,nameInstructor:a,data:S,hora:e})},E(n),A(s),D(!0))};return(0,y.jsxs)(i.default,{style:te.container,children:[(0,y.jsx)(l.default,{style:te.tipText,children:"Toque na data para escolher um novo dia ou use as setas!"}),(0,y.jsxs)(i.default,{style:te.rowContainer,children:[(0,y.jsx)(f.default,{onPress:()=>Y(-1),children:(0,y.jsx)(K.default,{name:"caretleft",size:60,color:"black"})}),(0,y.jsxs)(f.default,{onPress:()=>v(!0),style:te.dateContainer,children:[(0,y.jsx)(ee.default,{name:"calendar",size:28,color:"blue"}),(0,y.jsx)(l.default,{style:te.dateTime,children:F()(S).format("DD/MM/YYYY")})]}),(0,y.jsx)(f.default,{onPress:()=>Y(1),children:(0,y.jsx)(K.default,{name:"caretright",size:60,color:"black"})})]}),(0,y.jsx)(T,{visible:d}),x?(0,y.jsxs)(l.default,{style:te.errorText,children:["Erro: ",x]}):(0,y.jsx)(J.default,{style:te.listContainer,children:(e=>{const t=F()(e).format("YYYY-MM-DD");return c.includes(t)||[0,6].includes(F()(e).day())})(S)?(0,y.jsx)(l.default,{style:te.messageText,children:"Dia n\xe3o letivo"}):(0,y.jsx)(z.default,{data:h,renderItem:({item:e})=>{const t=e<p&&S===F()().format("YYYY-MM-DD");return(0,y.jsx)(f.default,{style:[te.button,t&&te.buttonDisabled],onPress:()=>!t&&O(e),disabled:t,children:(0,y.jsx)(l.default,{style:[te.buttonText,t&&te.buttonTextDisabled],children:e})})},keyExtractor:(e,t)=>t.toString(),contentContainerStyle:te.flatListContentContainer,ItemSeparatorComponent:()=>(0,y.jsx)(i.default,{style:te.separator})})}),(0,y.jsx)(f.default,{style:[te.button,te.buttonBack],onPress:()=>t.goBack(),children:(0,y.jsx)(l.default,{style:te.buttonText,children:"Voltar"})}),C&&(0,y.jsx)(X.default,{value:F()(S).toDate(),mode:"date",display:"default",onChange:(e,t)=>{v(!1),"set"===e.type&&t&&k(F()(t).format("YYYY-MM-DD"))},minimumDate:F()().toDate(),maximumDate:F()().add(7,"days").toDate()}),(0,y.jsxs)(i.default,{style:te.contador,children:[(0,y.jsx)(i.default,{style:[te.circle,{backgroundColor:"blue"}]}),(0,y.jsx)(i.default,{style:[te.circle,{backgroundColor:"blue"}]}),(0,y.jsx)(i.default,{style:[te.circle,{backgroundColor:"blue"}]}),(0,y.jsx)(i.default,{style:[te.circle,{backgroundColor:"lightgray"}]})]}),(0,y.jsx)(g.default,{isVisible:_,children:(0,y.jsxs)(i.default,{style:te.modalContent,children:[(0,y.jsx)(l.default,{style:te.modalMessage,children:B}),(0,y.jsxs)(i.default,{style:te.modalButtons,children:[(0,y.jsx)(f.default,{style:te.modalButton,onPress:()=>{I&&I(),D(!1)},children:(0,y.jsx)(l.default,{style:te.modalButtonText,children:"Confirmar"})}),(0,y.jsx)(f.default,{style:te.modalButton,onPress:()=>D(!1),children:(0,y.jsx)(l.default,{style:te.modalButtonText,children:"Cancelar"})})]})]})}),(0,y.jsx)(n.default,{ref:e=>n.default.setRef(e)})]})};var oe=r(9632);const ae=u.default.create({container:{flex:1,justifyContent:"center",alignItems:"center",padding:20,backgroundColor:"#F8F8F8"},title:{textAlign:"center",fontSize:24,fontWeight:"bold",color:"#333",marginBottom:20},num:{textAlign:"center",fontSize:24,fontWeight:"none",color:"#333",marginBottom:20},button:{width:"80%",backgroundColor:"blue",borderRadius:8,paddingVertical:15,alignItems:"center",justifyContent:"center",marginVertical:10,elevation:3},buttonText:{color:"#fff",fontSize:18,fontWeight:"bold"},modalContent:{backgroundColor:"white",padding:20,borderRadius:10,alignItems:"center"},modalMessage:{fontSize:18,marginBottom:20},modalButtons:{flexDirection:"row",justifyContent:"space-between",width:"100%"},modalButton:{flex:1,backgroundColor:"blue",padding:15,borderRadius:5,marginHorizontal:5,alignItems:"center"},modalButtonText:{color:"white",fontSize:16}}),ne=({navigation:e})=>{const[t,r]=(0,s.useState)(!1),[o,a]=(0,s.useState)(null);return(0,y.jsxs)(i.default,{style:ae.container,children:[(0,y.jsx)(l.default,{style:ae.title,children:"Entre em contato nesse n\xfamero abaixo (Clique nele para ser redirecionado para conversar com o mesmo)"}),(0,y.jsx)(f.default,{children:(0,y.jsx)(l.default,{onPress:()=>{a("whatsapp"),r(!0)},style:ae.num,children:"(17) 99757-2900"})}),(0,y.jsx)(f.default,{style:ae.button,onPress:()=>{e.navigate("Login")},children:(0,y.jsx)(l.default,{style:ae.buttonText,children:"Voltar"})}),(0,y.jsx)(g.default,{isVisible:t,children:(0,y.jsxs)(i.default,{style:ae.modalContent,children:[(0,y.jsx)(l.default,{style:ae.modalMessage,children:"Voc\xea tem certeza que deseja abrir o WhatsApp?"}),(0,y.jsxs)(i.default,{style:ae.modalButtons,children:[(0,y.jsx)(f.default,{style:ae.modalButton,onPress:()=>{r(!1),oe.default.openURL("https://wa.me/5517997572900").catch((e=>console.error("An error occurred",e)))},children:(0,y.jsx)(l.default,{style:ae.modalButtonText,children:"Confirmar"})}),(0,y.jsx)(f.default,{style:ae.modalButton,onPress:()=>r(!1),children:(0,y.jsx)(l.default,{style:ae.modalButtonText,children:"Cancelar"})})]})]})}),(0,y.jsx)(n.default,{ref:e=>n.default.setRef(e)})]})},se=(0,a.default)(),ie=()=>(0,y.jsxs)(o.default,{children:[(0,y.jsx)(n.default,{ref:e=>n.default.setRef(e)}),(0,y.jsxs)(se.Navigator,{initialRouteName:"Login",children:[(0,y.jsx)(se.Screen,{name:"Login",component:p,options:{headerShown:!1}}),(0,y.jsx)(se.Screen,{name:"Suport",component:ne,options:{headerShown:!1}}),(0,y.jsx)(se.Screen,{name:"Home",component:E,options:{headerShown:!1}}),(0,y.jsx)(se.Screen,{name:"SelectType",component:P,options:{headerShown:!1}}),(0,y.jsx)(se.Screen,{name:"SelectInstructor",component:O,options:{headerShown:!1}}),(0,y.jsx)(se.Screen,{name:"ConfirmAula",component:W,options:{headerShown:!1}}),(0,y.jsx)(se.Screen,{name:"End",component:N,options:{headerShown:!1}}),(0,y.jsx)(se.Screen,{name:"Error",component:$,options:{headerShown:!1}}),(0,y.jsx)(se.Screen,{name:"ListAulas",component:Z,options:{headerShown:!1}}),(0,y.jsx)(se.Screen,{name:"SelectHourAndDate",component:re,options:{headerShown:!1}})]})]})},5358:(e,t,r)=>{var o={"./af":7582,"./af.js":7582,"./ar":3042,"./ar-dz":4265,"./ar-dz.js":4265,"./ar-kw":4934,"./ar-kw.js":4934,"./ar-ly":5352,"./ar-ly.js":5352,"./ar-ma":7097,"./ar-ma.js":7097,"./ar-ps":6150,"./ar-ps.js":6150,"./ar-sa":4427,"./ar-sa.js":4427,"./ar-tn":7221,"./ar-tn.js":7221,"./ar.js":3042,"./az":458,"./az.js":458,"./be":7596,"./be.js":7596,"./bg":3830,"./bg.js":3830,"./bm":7044,"./bm.js":7044,"./bn":8573,"./bn-bd":3296,"./bn-bd.js":3296,"./bn.js":8573,"./bo":5614,"./bo.js":5614,"./br":2041,"./br.js":2041,"./bs":1786,"./bs.js":1786,"./ca":5833,"./ca.js":5833,"./cs":2711,"./cs.js":2711,"./cv":1036,"./cv.js":1036,"./cy":4977,"./cy.js":4977,"./da":8770,"./da.js":8770,"./de":7342,"./de-at":1566,"./de-at.js":1566,"./de-ch":7544,"./de-ch.js":7544,"./de.js":7342,"./dv":2875,"./dv.js":2875,"./el":8536,"./el.js":8536,"./en-au":8617,"./en-au.js":8617,"./en-ca":9227,"./en-ca.js":9227,"./en-gb":9754,"./en-gb.js":9754,"./en-ie":7217,"./en-ie.js":7217,"./en-il":5418,"./en-il.js":5418,"./en-in":800,"./en-in.js":800,"./en-nz":7299,"./en-nz.js":7299,"./en-sg":6305,"./en-sg.js":6305,"./eo":8673,"./eo.js":8673,"./es":1301,"./es-do":3187,"./es-do.js":3187,"./es-mx":8223,"./es-mx.js":8223,"./es-us":7634,"./es-us.js":7634,"./es.js":1301,"./et":4976,"./et.js":4976,"./eu":1847,"./eu.js":1847,"./fa":4372,"./fa.js":4372,"./fi":1628,"./fi.js":1628,"./fil":6802,"./fil.js":6802,"./fo":2874,"./fo.js":2874,"./fr":9853,"./fr-ca":7170,"./fr-ca.js":7170,"./fr-ch":2825,"./fr-ch.js":2825,"./fr.js":9853,"./fy":8876,"./fy.js":8876,"./ga":3533,"./ga.js":3533,"./gd":2770,"./gd.js":2770,"./gl":8602,"./gl.js":8602,"./gom-deva":3059,"./gom-deva.js":3059,"./gom-latn":8212,"./gom-latn.js":8212,"./gu":3409,"./gu.js":3409,"./he":7210,"./he.js":7210,"./hi":4750,"./hi.js":4750,"./hr":1315,"./hr.js":1315,"./hu":7626,"./hu.js":7626,"./hy-am":1317,"./hy-am.js":1317,"./id":6892,"./id.js":6892,"./is":7577,"./is.js":7577,"./it":7628,"./it-ch":3046,"./it-ch.js":3046,"./it.js":7628,"./ja":2504,"./ja.js":2504,"./jv":5917,"./jv.js":5917,"./ka":4513,"./ka.js":4513,"./kk":4935,"./kk.js":4935,"./km":6661,"./km.js":6661,"./kn":9964,"./kn.js":9964,"./ko":8067,"./ko.js":8067,"./ku":1165,"./ku-kmr":5158,"./ku-kmr.js":5158,"./ku.js":1165,"./ky":1177,"./ky.js":1177,"./lb":2967,"./lb.js":2967,"./lo":1972,"./lo.js":1972,"./lt":8469,"./lt.js":8469,"./lv":3155,"./lv.js":3155,"./me":7935,"./me.js":7935,"./mi":4483,"./mi.js":4483,"./mk":2501,"./mk.js":2501,"./ml":3120,"./ml.js":3120,"./mn":266,"./mn.js":266,"./mr":7025,"./mr.js":7025,"./ms":109,"./ms-my":864,"./ms-my.js":864,"./ms.js":109,"./mt":523,"./mt.js":523,"./my":4067,"./my.js":4067,"./nb":3682,"./nb.js":3682,"./ne":8771,"./ne.js":8771,"./nl":6735,"./nl-be":7761,"./nl-be.js":7761,"./nl.js":6735,"./nn":7569,"./nn.js":7569,"./oc-lnc":833,"./oc-lnc.js":833,"./pa-in":3044,"./pa-in.js":3044,"./pl":4249,"./pl.js":4249,"./pt":7585,"./pt-br":6826,"./pt-br.js":6826,"./pt.js":7585,"./ro":2526,"./ro.js":2526,"./ru":2204,"./ru.js":2204,"./sd":3270,"./sd.js":3270,"./se":1541,"./se.js":1541,"./si":1921,"./si.js":1921,"./sk":9935,"./sk.js":9935,"./sl":6254,"./sl.js":6254,"./sq":9897,"./sq.js":9897,"./sr":2496,"./sr-cyrl":1135,"./sr-cyrl.js":1135,"./sr.js":2496,"./ss":2215,"./ss.js":2215,"./sv":4716,"./sv.js":4716,"./sw":803,"./sw.js":803,"./ta":1538,"./ta.js":1538,"./te":2302,"./te.js":2302,"./tet":5280,"./tet.js":5280,"./tg":4100,"./tg.js":4100,"./th":5385,"./th.js":5385,"./tk":736,"./tk.js":736,"./tl-ph":9726,"./tl-ph.js":9726,"./tlh":1873,"./tlh.js":1873,"./tr":6463,"./tr.js":6463,"./tzl":7491,"./tzl.js":7491,"./tzm":9500,"./tzm-latn":196,"./tzm-latn.js":196,"./tzm.js":9500,"./ug-cn":1287,"./ug-cn.js":1287,"./uk":5341,"./uk.js":5341,"./ur":6246,"./ur.js":6246,"./uz":5550,"./uz-latn":7254,"./uz-latn.js":7254,"./uz.js":5550,"./vi":8796,"./vi.js":8796,"./x-pseudo":2736,"./x-pseudo.js":2736,"./yo":8621,"./yo.js":8621,"./zh-cn":9982,"./zh-cn.js":9982,"./zh-hk":9053,"./zh-hk.js":9053,"./zh-mo":1248,"./zh-mo.js":1248,"./zh-tw":4725,"./zh-tw.js":4725};function a(e){var t=n(e);return r(t)}function n(e){if(!r.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}a.keys=function(){return Object.keys(o)},a.resolve=n,e.exports=a,a.id=5358},4682:(e,t,r)=>{"use strict";e.exports=r.p+"static/media/logoAutoEscolaIdeal.89f318846fb3758fde32.png"},477:()=>{}},t={};function r(o){var a=t[o];if(void 0!==a)return a.exports;var n=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.loaded=!0,n.exports}r.m=e,(()=>{var e=[];r.O=(t,o,a,n)=>{if(!o){var s=1/0;for(u=0;u<e.length;u++){for(var[o,a,n]=e[u],i=!0,l=0;l<o.length;l++)(!1&n||s>=n)&&Object.keys(r.O).every((e=>r.O[e](o[l])))?o.splice(l--,1):(i=!1,n<s&&(s=n));if(i){e.splice(u--,1);var d=a();void 0!==d&&(t=d)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[o,a,n]}})(),r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(o,a){if(1&a&&(o=this(o)),8&a)return o;if("object"===typeof o&&o){if(4&a&&o.__esModule)return o;if(16&a&&"function"===typeof o.then)return o}var n=Object.create(null);r.r(n);var s={};e=e||[null,t({}),t([]),t(t)];for(var i=2&a&&o;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((e=>s[e]=()=>o[e]));return s.default=()=>o,r.d(n,s),n}})(),r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,o)=>(r.f[o](e,t),t)),[])),r.u=e=>"static/js/"+e+".783bc47a.chunk.js",r.miniCssF=e=>{},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="web:";r.l=(o,a,n,s)=>{if(e[o])e[o].push(a);else{var i,l;if(void 0!==n)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var c=d[u];if(c.getAttribute("src")==o||c.getAttribute("data-webpack")==t+n){i=c;break}}i||(l=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,r.nc&&i.setAttribute("nonce",r.nc),i.setAttribute("data-webpack",t+n),i.src=o),e[o]=[a];var f=(t,r)=>{i.onerror=i.onload=null,clearTimeout(m);var a=e[o];if(delete e[o],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((e=>e(r))),t)return t(r)},m=setTimeout(f.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=f.bind(null,i.onerror),i.onload=f.bind(null,i.onload),l&&document.head.appendChild(i)}}})(),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r.p="/App-Ideal/",(()=>{var e={792:0};r.f.j=(t,o)=>{var a=r.o(e,t)?e[t]:void 0;if(0!==a)if(a)o.push(a[2]);else{var n=new Promise(((r,o)=>a=e[t]=[r,o]));o.push(a[2]=n);var s=r.p+r.u(t),i=new Error;r.l(s,(o=>{if(r.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var n=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.src;i.message="Loading chunk "+t+" failed.\n("+n+": "+s+")",i.name="ChunkLoadError",i.type=n,i.request=s,a[1](i)}}),"chunk-"+t,t)}},r.O.j=t=>0===e[t];var t=(t,o)=>{var a,n,[s,i,l]=o,d=0;if(s.some((t=>0!==e[t]))){for(a in i)r.o(i,a)&&(r.m[a]=i[a]);if(l)var u=l(r)}for(t&&t(o);d<s.length;d++)n=s[d],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(u)},o=self.webpackChunkweb=self.webpackChunkweb||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=r.O(void 0,[197],(()=>r(5036)));o=r.O(o)})();
//# sourceMappingURL=main.3f978460.js.map